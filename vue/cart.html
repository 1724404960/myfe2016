<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>啊该屎</title>
    <style>
        table,th,td{
            border:1px solid #000;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
<div id="cart">
<table id="tab">
    <thead>
    <tr>
        <th></th>
        <th>商品图片</th>
        <th>商品信息</th>
        <th>赠送</th>
        <th>商品金额</th>
        <th>商品数量</th>
        <th>总金额</th>
        <th>编辑</th>
    </tr>
    </thead>
    <tbody>
        <tr v-for="product in productList" @click="addProct(product)">
            <td>
                <input type="checkbox">
            </td>
            <td>
                <img :src="product.productImg" alt="" width="100">
            </td>
            <td>{{product.productName}}</td>
            <td></td>
            <td>19</td>
            <td>
                <button>-</button>
                <input type="text" v-bind:value="product.productQuentity">
                <button @click="add(product)">+</button>
            </td>
            <!--<td>{{product.productPrice*product.productQuentity}}</td>-->
            <td>{{product.productPrice*product.productQuentity}}</td>
            <td>删除</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="6"><input type="checkbox">全选</td>
            <td>总计:{{totalmoney}}</td>
            <td><button>结账</button></td>
        </tr>
    </tfoot>
</table>
</div>
<script src="vue.min.js"></script>
<script src="node_modules/.0.15.3@axios/dist/axios.min.js"></script>
<script>
    var vm=new Vue({
        el:'#cart',
        data:{
            totalmoney:0,
            productList:[],
            cartList:[]
        },
        computed:{

        },
        methods:{
            add:function(product){
                product.productQuentity++;
                this.counttotalmoney();
                console.log(this.totalmoney);
            },
            addProct:function(product){
                if(this.cartList.indexOf(product)==-1){
                    this.cartList.push(product)
                }else{
                    this.cartList.splice(this.cartList.indexOf(product),1)
                }
                this.counttotalmoney();

            },
            counttotalmoney:function(){
//                var that=this;
//                this.totalmoney=0;
//                this.cartList.forEach(function(product){
//                    that.totalmoney+=product.productQuentity*product.productPrice
//
//                })
                var _this=this;
                _this.totalmoney=0;
                this.cartList.forEach(function(product){
                    _this.totalmoney+=product.productQuentity*product.productPrice

                })
            }

        },
        mounted:function(){
            var that = this;
                axios.get('cart.json').then(function(res){
                    that.productList=res.data.result.productList
                })
        }
    })
</script>
</body>
</html>